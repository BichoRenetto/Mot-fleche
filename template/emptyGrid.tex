\documentclass[a4paper]{article}

\usepackage[top=1cm,bottom=1cm,inner=5mm,outer=5mm]{geometry}
\usepackage{tikz}
\usepackage{ifthen}
\usepackage{xstring} % to extract a character from a string

% Custom font
%\usepackage{cmbright}
%\usepackage[OT1]{fontenc}
\usepackage[T1]{fontenc}
\usepackage[default]{gillius}

% Arrow round arrowhead
\usetikzlibrary{shapes, arrows.meta, positioning}

\def\ArrowWidth{0.75} % Arrow line width
% PS: 1pt = 0.03515 cm
\tikzstyle{roundarrow} = [ %
line width = \ArrowWidth pt, %
-{Triangle[width = 4pt, %
          length = 4pt, %
          round, %
          line width=1pt %
          ]}, %
color = black]



% Define default color
\usepackage{xcolor}
\definecolor{Color1}{HTML}{9DFF00}
\definecolor{Color2}{HTML}{FF9900}

\newcommand{\setcustomcolor}[2]{%
  \pgfmathtruncatemacro{\sum}{#1 + #2} % Calculate the sum
  \ifthenelse{\isodd{\sum}}{%
    \colorlet{customcolor}{Color1} % If the sum is odd, set customcolor to Color1
  }{%
    \colorlet{customcolor}{Color2} % If the sum is even, set customcolor to Color2
  }%
}

% Define macro for non-definition cell
\def\SquareL{1.35} % Length of the square

\newcommand{\fillcell}[3]{
\setcustomcolor{#1}{#2} ;
\pgfmathsetmacro{\xcoord}{(#1-1)*\SquareL};
\pgfmathsetmacro{\ycoord}{-(#2-1)*\SquareL};
\node (rect) at (\xcoord,\ycoord) % negative so that it follows page lecture
[draw, thick, fill = customcolor, minimum width=\SquareL cm,minimum height=\SquareL cm] {\huge #3};
}

% solution (paste0 the solution)
%% Warning : on remplit en descendant colonnes par colonnes
\def\solgrid{PFAQAZPLZOUILCNKWKSLLYVZMWDZMGCQRWXZNVLUZPRXHJANWICRPSTZIABRDWOWWJRWNXDTAOROUDQXCOBLCZTIFWHQLBHFMPDCJWMZLEAANALOCCCHOFOBVFOHATNSGGYYHCTQBKYJXUTSPDXYOYFPYMUNEIWRGPOXKWKQXDZTNYRMRUMJVMRHUBJLMRKFGWCIZORLBEEFXJPZ}

% Macro for the definition cells
\newcommand{\singledef}[4]{
\pgfmathsetmacro{\xcoord}{(#1-1)*\SquareL};
\pgfmathsetmacro{\ycoord}{-(#2-1)*\SquareL};
\node (rect) at (\xcoord,\ycoord)[
 draw,
 thick,
 fill = white, %
 minimum width=\SquareL cm, %
 minimum height=\SquareL cm, %
 align = center] {};

% Text
\pgfmathsetmacro{\SquareT}{(0.925*\SquareL};

\node (text) at (\xcoord,\ycoord)[
 minimum width=\SquareL cm, %
 minimum height=\SquareL cm, %
 inner sep=0pt] {%
  \begin{minipage}[c][\SquareT cm][c]{\SquareT cm}
  \centering
  \fontsize{5pt}{6.5pt}\selectfont \MakeUppercase{#4}
  \end{minipage}
 };

 % Arrow
 \ifthenelse{\equal{#3}{right}}{%
  %Right arrow
  \pgfmathsetmacro{\xarrow}{\xcoord + \SquareL/2 + 0.3}
  \pgfmathsetmacro{\yarrow}{\ycoord}
  \draw[roundarrow] (rect.east) -- (\xarrow, \yarrow);}{%
  % Down arrow
  \ifthenelse{\equal{#3}{down}}{
   \pgfmathsetmacro{\xarrow}{\xcoord}
   \pgfmathsetmacro{\yarrow}{\ycoord - \SquareL/2 - 0.3}
   \draw[roundarrow] (rect.south) -- (\xarrow, \yarrow);
  }{%
   % Down then right arrow
   \ifthenelse{\equal{#3}{downright}}{
    % First part of the arrow
    % Need to take into account half the width of the arrow
     \pgfmathsetmacro{\yborder}{(\SquareL + \ArrowWidth * 0.03515)/2}

    \pgfmathsetmacro{\xarrow}{
    \xcoord - \yborder*tan(270-235)}
    \pgfmathsetmacro{\yarrow}{\ycoord - \SquareL/2 -0.2}

    \draw [line width = \ArrowWidth pt] (rect.235) -- (\xarrow, \yarrow) -- (\xarrow+0.1, \yarrow) ;

    \draw[roundarrow](\xarrow,\yarrow) -- (\xarrow +0.3, \yarrow);
    }{
    % Right then down arrow
    \ifthenelse{\equal{#3}{rightdown}}{
     % First part of the arrow
     % Need to take into account half the width of the arrow
     \pgfmathsetmacro{\xborder}{(\SquareL + \ArrowWidth * 0.03515)/2}

     \pgfmathsetmacro{\xarrow}{\xcoord + \SquareL/2 + 0.2}
     \pgfmathsetmacro{\yarrow}{
     \ycoord + \xborder*tan(35)}

     \draw [line width = \ArrowWidth pt] (rect.35) -- (\xarrow, \yarrow) -- (\xarrow, \yarrow-0.1) ;

     \draw[roundarrow](\xarrow,\yarrow) -- (\xarrow, \yarrow -0.3);
    }{
     % Return nothing
     }
    }
   }
  }
}

\newcommand{\doubleledef}[6]{
\pgfmathsetmacro{\xcoord}{(#1-1)*\SquareL};
\pgfmathsetmacro{\ycoord}{-(#2-1)*\SquareL};
\node (rect) at (\xcoord,\ycoord)[
 draw,
 thick,
 fill = white, %
 minimum width=\SquareL cm, %
 minimum height=\SquareL cm, %
 align = center] {};

% Text
\pgfmathsetmacro{\SquareT}{(0.925*\SquareL};

\node (text) at (\xcoord,\ycoord)[
 minimum width=\SquareL cm, %
 minimum height=\SquareL cm, %
 inner sep=0pt] {%
  \begin{minipage}[c][\SquareT cm][c]{\SquareT cm}
  \begin{center}

   \fontsize{5pt}{6.5pt}\selectfont\MakeUppercase{#4}
   \rule[0.333\baselineskip]{0.9\textwidth}{0.5pt}
   \fontsize{5pt}{6.5pt}\selectfont\MakeUppercase{#6}
  \end{center}
  \end{minipage}
 };

 % Arrow
 \ifthenelse{\equal{#3}{right} \or \equal{#5}{right}}{%
  %Right arrow
  \pgfmathsetmacro{\xarrow}{\xcoord + \SquareL/2 + 0.3}
  \pgfmathsetmacro{\yarrow}{\ycoord}
  \draw[roundarrow] (rect.east) -- (\xarrow, \yarrow);}{
  % Return nothing
  }
  % Down arrow
 \ifthenelse{\equal{#3}{down} \or \equal{#5}{down}}{
   \pgfmathsetmacro{\xarrow}{\xcoord}
   \pgfmathsetmacro{\yarrow}{\ycoord - \SquareL/2 - 0.3}
   \draw[roundarrow] (rect.south) -- (\xarrow, \yarrow);
  }{
  % Return nothing
  }
   % Down then right arrow
 \ifthenelse{\equal{#3}{downright} \or \equal{#5}{downright}}{
  % First part of the arrow
  % Need to take into account half the width of the arrow
  \pgfmathsetmacro{\yborder}{(\SquareL + \ArrowWidth * 0.03515)/2}

 \pgfmathsetmacro{\xarrow}{\xcoord - \yborder*tan(270-235)}
 \pgfmathsetmacro{\yarrow}{\ycoord - \SquareL/2 -0.2}

 \draw [line width = \ArrowWidth pt] (rect.235) -- (\xarrow, \yarrow) -- (\xarrow+0.1, \yarrow) ;

 \draw[roundarrow](\xarrow,\yarrow) -- (\xarrow +0.3, \yarrow);
  }{
  % Return nothing
  }
 % Right then down arrow
 \ifthenelse{\equal{#3}{rightdown} \or \equal{#5}{rightdown}}{
  % First part of the arrow
  % Need to take into account half the width of the arrow
  \pgfmathsetmacro{\xborder}{(\SquareL + \ArrowWidth * 0.03515)/2}

  \pgfmathsetmacro{\xarrow}{\xcoord + \SquareL/2 + 0.2}
  \pgfmathsetmacro{\yarrow}{\ycoord + \xborder*tan(35)}

  \draw [line width = \ArrowWidth pt] (rect.35) -- (\xarrow, \yarrow) -- (\xarrow, \yarrow-0.1) ;

  \draw[roundarrow](\xarrow,\yarrow) -- (\xarrow, \yarrow -0.3);
  }{
  % Return nothing
  }
}

% Main document
\begin{document}
 \pagestyle{empty}
 Bonjour héhé.\\[\baselineskip]
 \solgrid

 \vspace{1cm}
 \centering
 \begin{tikzpicture}
  \foreach \x in {1,2, ..., 13}%
  { \foreach \y in {1,2, ..., 16}{
	\pgfmathsetmacro{\countcell}{\y + (\x-1)*13}; % Compute the location of the cell
	\pgfmathtruncatemacro{\countcellint}{\countcell}; % convert number as integer
	\StrChar{\solgrid}{\countcellint}[\test]; % Extract the i-th element of the string
	\fillcell{\x}{\y}{\test}; % Fill the grid
	}
  }
  \singledef{5}{7}{down}{un texte un peu long mais bon voilà, il est la}
  \singledef{4}{8}{right}{deuxième définition}
  \singledef{4}{5}{downright}{Troisième définition}
  \singledef{3}{7}{rightdown}{Quatrième définition}
  \doubleledef{2}{9}{down}{tester}{rightdown}{Test2}
 \end{tikzpicture}
\end{document}
